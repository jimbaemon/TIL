#  The Red : TDD : 안정감을 주는 코드 작성 방법

# 작성법

그냥 일단 닥치는대로 적고 정리는 나중에 하자... 귀찮다



# 프롤로그

### 엔지니어링

* 엔지니어링 VS 과학



* 해법은 있지만, 은탄환은 없다.



* 근육 기억을 통해 비용을 줄여라





* 테스트 주도 개발 역시 `엔지니어링` 범위를 벗어나지 않는다.
* `과학`은 밝혀내고, `엔지니어링`은 해결한다.
* 과학은 어떤 현상이 왜 발생하는지에 밝혀내는것 -> 규칙을 발견하는것
* 엔지니어링은 문제를 해결하는 의미 -> 문제를 해결하는것
* 개발은 엔지니어링과 가깝다.
* 엔지니어링은 과학과 수단으로 하여 자원을 고려하여 수행하는  작업
* 과학은 순수하고 완벽함을 추구할수 있지만, 엔지니어링은 자원을 최소화하여 효과를 극대화 하는데 목적을 가진다. -> 이론을 이용하되 매몰되어서는 안된다.
* 우리는 엔지니어로써 높은 가치를 가지고 일할 필요가 있는 것인가? -> 상황에 맞는 코드를 다루면 되지 않을까 하는 의견 제시



* 패턴 : 알려진 문제의 일반적이고 재사용할수 있는 해결법
  * 프로그래머는 고유한 문제를 풀어야 한다. -> 비슷한 형태의 문제여도 사업에 형태에 따라 다른 문제가 된다.
  * 고유한 문제는 좀 더 작은 하위 기술 문제를 가진다. 
  * 고유 문제를 풀기위한 하위 기술 문제는 **과거에 해결했던 문제와 동일할수 있다**. -> 해법이 있다.
  * 패턴은 약과, 열쇠와 같다. -> 언제 써야 하는지 알아야 좋다.



* 엔지니어링은 더 심각한 문제와 덜 심각한 문제의 `거래` 다.

* TDD 도 만능 키는 아니다, 적절하게 사용해야 좋다.



* 근육 기억을 통해 비용을 줄여라 -> 지속적인 연습 필요



---



## 테스트 주도 개발 기초

### 코드 기능 명세

* 모든 프로그램 코드는 입력과 출력을 갖고 특정 입력에 대해 기대하는 출력이 있다. 이런 기대 동작들을 `코드의 기능 명세` 혹은 `요구사항` 이라고 부른다.

* 기능 명세의 출발점은 `도메인`이다.

#### 도메인

* 소프트웨어가 문제를 푸는 도구라면, `도메인`은 소프트웨어가 풀어야 할 문제가 정의되는 공간이다.
* 문제를 충분히 이해하지 못하면 문제를 푸는 도구를 잘 만들 수 없기 때문에 도메인은 중요하다.
* 도메인의 지식흐름은 `비즈니스 전문가` > `분석가` > `프로그래머` > `컴퓨터` 로 흘러가고 `목적/추상적` 에 가까웠던 내용이 `수단/구체적` 에 가까워 지게 된다.
  * `비즈니스 전문가` : 
    * 문제를 가장 잘 이해 하지만 객관적으로 표현 하지는 못한다.
    * 풀이도 가장 잘 이해 한다고 착각한다.
  * `분석가` :
    * 비즈니스 전문가로부터 요구사항을 발굴
    * 발굴된 오류사항의 오류를 탐색한다.
    * 발견된 문제점을 구현 작업 전에 협업을 통해 해결해야 한다.
  * `프로그래머` :
    * 정제된 기능 명세를 아키텍처와 코드로 번역
      * 가장 비용이 큰 작업
    * 끊임없는 설계 결정을 내려야 한다.
    * 지식 흐름 과정의 `마지막 인간`.
  * `컴퓨터` :
    * 코드를 통해 프로그래머로부터 지식을 전달받음
    * 철저히 수동적
    * 융통성이 없다
* 컴퓨터는 스스로 설계를 결정하지 않기 때문에 프로그래머가 도메인을 전달할때 **모든 요소들이 명확히 결정되어야 한다.(기획자들이랑 싸움의 요소)**
* 충분히 명확한 도메인 지식을 확보하지 못한 경우 프로그래머는 **지식 흐름 상류에 지식 보강을 요청해야 한다.**



---



### 테스트 기법

#### 수동 테스트

* `QA` 가 UI 를 사용해 기능을 검증
* 최종 사용자와 비슷하게 검증
* **실행 비용이 높고 테스트 변동이 크다.**
* 가장 온전한 코드 실행
* **인수 테스트**

* 기존에 잘되던 기능에서 버그가 생겨나는 것을 `소프트웨어 회귀` 한다.

* 기능이 추가 될수록, 시간이 지날수록 테스트 해야할 대상은 점점 늘어나게 된다.
* 수동 테스트에서는 새로 추가된 기능에 대해서만 테스트 하지 기존 기능에 대한 테스트는 일반적으로 진행되지 않는다.



#### 테스트 자동화

* 기능을 검증하는 코드를 작성
* 테스트 코드 작성 비용이 소비되지만 **실행 비용이 낮고 결과의 신뢰도가 높다**.
* 테스트 코드 작성과 관리가 **프로그래머 역량에 크게 영향 받는다**.



#### 인수테스트

* **배치된 시스템을 대상**으로 검증
* 전체 시스템 이상 여부 **신뢰도가 높음**
* 모든 시스템을 배포후 테스트 해야되기 때문에 **높은 비용**
* 현상은 파악되지만, 이유는 파악이 어렵기 때문에 피드백 품질이 낮음



#### 단위 테스트

* 시스템의 **일부**를 대상으로 검증
* **낮은 비용**
* 단위 내에서 문제 파악이 가능하므로 **높은 피드백 품질**
* 단위만 보기 떄문에 전체 시스템 이상 여부 **신뢰도가 낮음**



